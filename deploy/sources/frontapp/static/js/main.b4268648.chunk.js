(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{39:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),a=n(31),r=n.n(a),i=(n(39),n(10)),o=n(11),l=n(13),j=n(12),d=(n(40),n(8)),u=n(3),h=n(0);var b=function(e){var t,n,s,c=e.isAuthenticated,a=e.logout;return t="/login",n="\u0412\u0445\u043e\u0434",c&&(t="/logout",n="\u0412\u044b\u0439\u0442\u0438",s=a),Object(h.jsxs)("header",{className:"d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom",children:[Object(h.jsx)(d.b,{to:"/",className:"d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none",children:"\u0424\u0438\u043b\u0430\u0440\u043c\u043e\u043d\u0438\u044f"}),Object(h.jsxs)("ul",{className:"nav nav-pills",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(d.b,{to:"/users",className:"nav-link",children:"Users"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(d.b,{to:"/concerts",className:"nav-link",children:"Concerts"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(d.b,{to:"/items",className:"nav-link",children:"Items"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(d.b,{to:t,className:"nav-link",onClick:s,children:n})})]})]})},m=function(){return Object(h.jsx)("footer",{children:"\xa9 Kurgan, 2021"})},O=function(e){return Object(h.jsxs)("tr",{className:"user-row",children:[Object(h.jsx)("td",{children:e.id}),Object(h.jsx)("td",{children:e.username}),Object(h.jsx)("td",{children:e.gender}),Object(h.jsx)("td",{children:e.date_birth})]})},x=function(e){return Object(h.jsxs)("div",{className:"users-list",children:[Object(h.jsx)("h1",{children:"Users"}),Object(h.jsxs)("table",{className:"user-list__table",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"id"}),Object(h.jsx)("th",{children:"username"}),Object(h.jsx)("th",{children:"gender"}),Object(h.jsx)("th",{children:"date birth"})]})}),Object(h.jsx)("tbody",{children:e.users.map((function(e){return Object(h.jsx)(O,{user:e},e.id)}))})]})]})},f=function(e){var t=e.concert;return Object(h.jsxs)("tr",{className:"concert-row",children:[Object(h.jsx)("td",{children:t.id}),Object(h.jsx)("td",{children:Object(h.jsx)(d.b,{to:"/concerts/detail/".concat(t.id),className:"nav-link",children:t.name})}),Object(h.jsx)("td",{children:t.desc}),Object(h.jsx)("td",{children:Object(h.jsx)(d.b,{to:"/concerts/delete/".concat(t.id),className:"nav-link",children:"delete"})})]})},v=function(e){var t=e.concerts;return Object(h.jsxs)("div",{className:"concert-list",children:[Object(h.jsx)("h1",{children:"Concerts"}),Object(h.jsxs)("table",{className:"concert-list__table",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"id"}),Object(h.jsx)("th",{children:"name"}),Object(h.jsx)("th",{children:"desc"})]})}),Object(h.jsx)("tbody",{children:t.map((function(e){return Object(h.jsx)(f,{concert:e},e.id)}))})]})]})},g=n(34),p=function(e){var t=e.concerts,n=(e.users,Object(g.a)().id),s=t.filter((function(e){return e.id===+n}))[0];return Object(h.jsxs)("div",{className:"concert-detail",children:[Object(h.jsxs)("h2",{children:["Concert: ",s.name]}),Object(h.jsxs)("h3",{children:["Desc: ",s.desc]})]})},k=function(e){var t=e.item;return Object(h.jsxs)("tr",{className:"item-row",children:[Object(h.jsx)("td",{children:t.id}),Object(h.jsx)("td",{children:t.name}),Object(h.jsx)("td",{children:t.concert})]})},y=function(e){var t=e.items;return Object(h.jsxs)("div",{className:"item-list",children:[Object(h.jsx)("h1",{children:"\u041d\u043e\u043c\u0435\u0440\u0430"}),Object(h.jsxs)("table",{className:"item-list__table",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"id"}),Object(h.jsx)("th",{children:"name"}),Object(h.jsx)("th",{children:"concert"})]})}),Object(h.jsx)("tbody",{children:t.map((function(e){return Object(h.jsx)(k,{item:e},e.id)}))})]})]})},N=n(15),S=n.n(N),C=n(18),w=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).state={username:"",password:""},s}return Object(o.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(C.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.login(this.state.username,this.state.password)}},{key:"render",value:function(){var e=this;return Object(h.jsx)("div",{className:"login-form",children:Object(h.jsxs)("form",{method:"post",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(h.jsx)("input",{type:"text",name:"username",placeholder:"username",onChange:function(t){return e.handleChange(t)}}),Object(h.jsx)("input",{type:"password",name:"password",placeholder:"password",onChange:function(t){return e.handleChange(t)}}),Object(h.jsx)("input",{type:"submit",value:"login"})]})})}}]),n}(c.a.Component),T=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).state={username:"",password1:"",password2:"",email:""},s}return Object(o.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(C.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.register(this.state.username,this.state.password1,this.state.password2,this.state.email)}},{key:"render",value:function(){var e=this;return Object(h.jsx)("div",{className:"login-form",children:Object(h.jsxs)("form",{method:"post",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(h.jsx)("input",{type:"text",name:"username",placeholder:"username",onChange:function(t){return e.handleChange(t)}}),Object(h.jsx)("input",{type:"password",name:"password",placeholder:"password",onChange:function(t){return e.handleChange(t)}}),Object(h.jsx)("input",{type:"submit",value:"login"})]})})}}]),n}(c.a.Component),A=function(e){return"".concat("http://127.0.0.1:8000","/api/").concat(e,"/")},I=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).state={users:[],concerts:[],items:[],accessToken:s.getAccessToken()},s}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.loadState()}},{key:"loadState",value:function(){var e=this,t=this.getHeaders();S.a.get(A("users"),{headers:t}).then((function(t){e.setState({users:t.data})})).catch((function(e){return console.log(e)})),S.a.get(A("concerts"),{headers:t}).then((function(t){e.setState({concerts:t.data})})).catch((function(e){return console.log(e)})),S.a.get(A("concert-items"),{headers:t}).then((function(t){e.setState({items:t.data})})).catch((function(e){return console.log(e)}))}},{key:"login",value:function(e,t){var n=this;S.a.post(A("token"),{username:e,password:t}).then((function(e){var t=e.data.refresh,s=e.data.access;console.log(s),n.saveTokens(t,s),n.setState({accessToken:s},n.loadState)})).catch((function(e){return console.log(e)}))}},{key:"register",value:function(e,t,n,s){console.log("do register",e,t,n,s)}},{key:"logout",value:function(){localStorage.setItem("refreshToken",null),localStorage.setItem("accessToken",null),this.clearState()}},{key:"clearState",value:function(){this.setState({accessToken:null,users:[],concerts:[],items:[]})}},{key:"saveTokens",value:function(e,t){localStorage.setItem("refreshToken",e),localStorage.setItem("accessToken",t)}},{key:"getAccessToken",value:function(){return localStorage.getItem("accessToken")}},{key:"isAuthenticated",value:function(){return"null"!==this.state.accessToken&&null!==this.state.accessToken}},{key:"getHeaders",value:function(){var e={"Content-Type":"application/json"};return this.isAuthenticated()&&(e.Authorization="Bearer ".concat(this.state.accessToken)),e}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"main",children:[Object(h.jsxs)(d.a,{children:[Object(h.jsx)(b,{isAuthenticated:this.isAuthenticated(),logout:function(){return e.logout()}}),Object(h.jsx)(u.a,{exact:!0,path:"/users",children:Object(h.jsx)(x,{users:this.state.users})}),Object(h.jsx)(u.a,{exact:!0,path:"/concerts",children:Object(h.jsx)(v,{concerts:this.state.concerts})}),Object(h.jsx)(u.a,{exact:!0,path:"/concerts/detail/:id",children:Object(h.jsx)(p,{concerts:this.state.concerts,users:this.state.users})}),Object(h.jsx)(u.a,{exact:!0,path:"/items",children:Object(h.jsx)(y,{items:this.state.items})}),Object(h.jsx)(u.a,{exact:!0,path:"/login",children:Object(h.jsx)(w,{login:function(t,n){return e.login(t,n)}})}),Object(h.jsx)(u.a,{exact:!0,path:"/register",children:Object(h.jsx)(T,{register:function(t,n,s,c){return e.register(t,n,s,c)}})})]}),Object(h.jsx)(m,{})]})}}]),n}(c.a.Component),_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,66)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),s(e),c(e),a(e),r(e)}))};r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(I,{})}),document.getElementById("root")),_()}},[[65,1,2]]]);
//# sourceMappingURL=main.b4268648.chunk.js.map